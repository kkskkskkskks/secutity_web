{% extends 'base.html' %}
{% block content %}
<div class="container-fluid">
  <h2 class="mt-4">회원 관리</h2>
  <div class="table-responsive">
    <table class="table table-striped table-hover">
      <thead class="table-dark">
        <tr>
          <th>ID</th>
          <th>이메일</th>
          <th>닉네임</th>
          <th>전화번호</th>
          <th>권한</th>
          <th>가입일</th>
          <th>작업</th>
        </tr>
      </thead>
      <tbody>
        {% for u in users %}
        <tr>
          <td>{{ u.id }}</td>
          <td>{{ u.email }}</td>
          <td>{{ u.nickname }}</td>
          <td>{{ u.phone or '-' }}</td>
          <td>{{ u.role_name }}</td>
          <td>{{ u.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
          <td>
            <form method="post"
                  action="{{ url_for('auth_bp.toggle_user_admin', user_id=u.id) }}"
                  style="display:inline;">
              <button class="btn btn-sm {% if u.role_name=='ADMIN' %}btn-warning{% else %}btn-secondary{% endif %}"
                      type="submit">
                {% if u.role_name=='ADMIN' %}권한 해제{% else %}관리자 지정{% endif %}
              </button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}